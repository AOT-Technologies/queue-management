{
	"info": {
		"_postman_id": "4b52746f-404b-42fb-b245-2e2ef396b2bb",
		"name": "Queue-Management API Tests",
		"description": "Test the back end APIs",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"_postman_id": "f36bb4d7-bb08-44a9-8cf5-476f0b7fccc0",
			"name": "Setup",
			"item": [
				{
					"_postman_id": "8c1551a3-00a0-4a27-bb5d-4ce51a556ab5",
					"name": "Install Postman BDD",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "1c9fd856-5ff7-4c5b-87c7-dc6d6167ac37",
								"type": "text/javascript",
								"exec": [
									"// If the \"postman_bdd_path\" environment variable is set, then we'll use it.",
									"// Otherwise, we'll default to the published version",
									"if (!environment.postman_bdd_path) {",
									"    postman.setGlobalVariable('postman_bdd_path', 'http://bigstickcarpet.com/postman-bdd/dist/postman-bdd.min.js');",
									"}",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "47e65f0f-09a2-4eda-a006-edfc894218b1",
								"type": "text/javascript",
								"exec": [
									"// \"install\" Postman BDD",
									"postman.setGlobalVariable('postmanBDD', responseBody);"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Cache-Control",
								"value": "no-cache"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{postman_bdd_path}}",
							"host": [
								"{{postman_bdd_path}}"
							]
						},
						"description": "This request downloads [Postman BDD](https://github.com/BigstickCarpet/postman-bdd) and then \"installs\" it by setting a global variable\n"
					},
					"response": []
				},
				{
					"_postman_id": "bdf1273d-e479-4e22-b398-9ed227a898c5",
					"name": "CFMS-Install-Auth-First",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5409b66d-67a4-449b-8633-9aeca632b388",
								"type": "text/javascript",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"auth_first\", jsonData.data);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "auth_url = pm.environment.get(\"auth_url\");\nrealm = pm.environment.get(\"realm\");\nclientid = pm.environment.get(\"clientid\");\nuserid = pm.environment.get(\"userid\");\npassword = pm.environment.get(\"password\");\nclient_secret = pm.environment.get(\"client_secret\");\n\nconst echoPostRequest = {\n  url: auth_url + '/auth/realms/' + realm + '/protocol/openid-connect/token',\n  method: 'POST',\n  header: 'Content-Type:application/x-www-form-urlencoded',\n  body: {\n    mode: 'raw',\n    raw: 'grant_type=password&client_id=' + clientid \n          + '&username=' + userid \n          + '&password=' + password\n          + '&client_secret=' + client_secret\n  }\n};\npm.sendRequest(echoPostRequest, function (err, res) {\n    var jsonData = res.json();\n    if (jsonData.hasOwnProperty('access_token')) {\n    \tpm.environment.set(\"token\", jsonData.access_token);\n\t    pm.environment.set(\"refresh_token\", jsonData.refresh_token);\n\t    console.log(err ? err : res.json());\n\t} else {\n\t    pm.environment.set(\"token\", 0);\n\t    pm.environment.set(\"refresh_token\", 0);\n\t    pm.environment.set(\"token_expires\", 0);\n\t    pm.environment.set(\"refresh_token_expires\", 0);\n\t}\n});"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"_postman_id": "e0c820bb-f49f-4d4f-8d9e-10282c89f1f9",
					"name": "CFMS-Install-Auth-NonQTxn",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d4115f4c-a05c-4de1-8020-da1181a82656",
								"type": "text/javascript",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"auth_first_nonqtxn\", jsonData.data);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "auth_url = pm.environment.get(\"auth_url\");\nrealm = pm.environment.get(\"realm\");\nclientid = pm.environment.get(\"clientid\");\nuserid = pm.environment.get(\"userid_nonqtxn\");\npassword = pm.environment.get(\"password_nonqtxn\");\nclient_secret = pm.environment.get(\"client_secret\");\n\nconst echoPostRequest = {\n  url: auth_url + '/auth/realms/' + realm + '/protocol/openid-connect/token',\n  method: 'POST',\n  header: 'Content-Type:application/x-www-form-urlencoded',\n  body: {\n    mode: 'raw',\n    raw: 'grant_type=password&client_id=' + clientid \n          + '&username=' + userid \n          + '&password=' + password\n          + '&client_secret=' + client_secret\n  }\n};\npm.sendRequest(echoPostRequest, function (err, res) {\n    var jsonData = res.json();\n    if (jsonData.hasOwnProperty('access_token')) {\n    \tpm.environment.set(\"token_nonqtxn\", jsonData.access_token);\n\t    pm.environment.set(\"refresh_token_nonqtxn\", jsonData.refresh_token);\n\t    console.log(err ? err : res.json());\n\t} else {\n\t    pm.environment.set(\"token_nonqtxn\", 0);\n\t    pm.environment.set(\"refresh_token_nonqtxn\", 0);\n\t    pm.environment.set(\"token_expires_nonqtxn\", 0);\n\t    pm.environment.set(\"refresh_token_expires_nonqtxn\", 0);\n\t}\n});"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"_postman_id": "5c89be17-8287-4487-ab8a-72d4aec57eba",
					"name": "CFMS-Install-Auth-Script",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f386cf22-bb0f-47d9-9c22-cda162ed4375",
								"type": "text/javascript",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"auth_script\", jsonData.data);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "auth_url = pm.environment.get(\"auth_url\");\nrealm = pm.environment.get(\"realm\");\nclientid = pm.environment.get(\"clientid\");\nuserid = pm.environment.get(\"userid\");\npassword = pm.environment.get(\"password\");\nclient_secret = pm.environment.get(\"client_secret\");\n\n"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"_postman_id": "51bb691a-aa22-4d52-aa56-97bb13d83d94",
					"name": "CFMS-Install-AuthToken-Script",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "e1d0ab5c-fe6b-4e6d-8778-417ae879cee1",
								"type": "text/javascript",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"auth_token_script\", jsonData.data);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "auth_url = pm.environment.get(\"auth_url\");\nrealm = pm.environment.get(\"realm\");\nclientid = pm.environment.get(\"clientid\");\nuserid = pm.environment.get(\"userid\");\npassword = pm.environment.get(\"password\");\nclient_secret = pm.environment.get(\"client_secret\");\n\nconst echoPostRequest = {\n  url: authurl + '/auth/realms/' + realm + '/protocol/openid-connect/token',\n  method: 'POST',\n  header: 'Content-Type:application/x-www-form-urlencoded',\n  body: {\n    mode: 'raw',\n    raw: 'grant_type=password&client_id=' + clientid \n         + '&username=' + userid \n         + '&password=' + password\n         + '&client_secret=' + client_secret\n  }\n};\n\npm.sendRequest(echoPostRequest, function (err, res) {\n    if (err) { console.log(err); }\n    else {\n      var jsonData = res.json();\n      pm.environment.set(\"token\", jsonData.access_token);\n      pm.environment.set(\"refresh_token\", jsonData.refresh_token);\n      pm.environment.set(\"token_expires\", Date.now()+(jsonData.expires_in * 1000));\n      pm.environment.set(\"refresh_token_expires\", Date.now()+(jsonData.refresh_expires_in * 1000));\n    }\n    //console.log(err ? err : res.json());\n});"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"_postman_id": "1206ff69-55f9-4c52-9354-f6e3731f6516",
					"name": "CFMS-Install-AuthRefresh-Script",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "365727f4-696d-4e44-a379-5eba3001641a",
								"type": "text/javascript",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"auth_refresh_script\", jsonData.data);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "auth_url = pm.environment.get(\"auth_url\");\nrealm = pm.environment.get(\"realm\");\nclientid = pm.environment.get(\"clientid\");\nrefresh_token = pm.environment.get(\"refresh_token\");\nclient_secret = pm.environment.get(\"client_secret\");\n\nconst echoPostRequest = {\n  url: authurl +'/auth/realms/' +realm + '/protocol/openid-connect/token',\n  method: 'POST',\n  header: 'Content-Type:application/x-www-form-urlencoded',\n  body: {\n    mode: 'raw',\n    raw: 'grant_type=refresh_token&client_id=' + clientid \n         + '&refresh_token=' + refresh_token \n         + '&client_secret=' + client_secret\n  }\n};\n\npm.sendRequest(echoPostRequest, function (err, res) {\n    var jsonData = res.json();\n    pm.environment.set(\"token\", jsonData.access_token);\n    pm.environment.set(\"refresh_token\", jsonData.refresh_token);\n    pm.environment.set(\"token_expires\", Date.now()+(jsonData.expires_in * 1000));\n    pm.environment.set(\"refresh_token_expires\", Date.now()+(jsonData.refresh_expires_in * 1000));\n\n    console.log(err ? err : res.json());\n});"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"_postman_id": "0a5d651e-d234-4b32-8e4c-63671f78c37d",
					"name": "CFMS-Install-Basic-Response-Tests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a0d8e240-3b40-4654-a32b-bf2e676fdeb9",
								"type": "text/javascript",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"basic_response_test\", jsonData.data);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "//  Test the authenticate response.\ndescribe('Basic response tests', function() {\n    it('Response time should be below 1000ms', function() {\n        pm.response.responseTime.should.be.below(1000);\n    });\n    it('Response statusCode should be 200 OK', function() {\n        response.should.have.status(200);\n    });\n    it('Response header should have Content-Type of application/json', function() {\n        response.should.have.header('content-type', 'application/json');\n    });\n    it('Response body be in JSON format', function() {\n        response.should.be.json; \n    });\n});\n"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"_postman_id": "37d8dc6e-af01-4a49-8d75-687d73c3b8f1",
					"name": "CFMS-Install-Complex-Response-Tests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f006b951-3205-4f21-a315-369f85591929",
								"type": "text/javascript",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"complex_response_test\", jsonData.data);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "//  Test the authenticate response.\ndescribe('Complex response tests', function() {\n    it('Response time should be below 25000ms', function() {\n        pm.response.responseTime.should.be.below(25000);\n    });\n    it('Response statusCode should be 200 OK', function() {\n        response.should.have.status(200);\n    });\n    it('Response header should have Content-Type of application/json', function() {\n        response.should.have.header('content-type', 'application/json');\n    });\n    it('Response body be in JSON format', function() {\n        response.should.be.json; \n    });\n});\n"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"_postman_id": "28053a9c-569c-433e-a907-7a52f0d8c5bc",
					"name": "CFMS-Install-Create-Response-Tests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "382b7b65-d736-4a03-a44a-3891f33b617d",
								"type": "text/javascript",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"create_response_test\", jsonData.data);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "//  Test the authenticate response.\ndescribe('Create response tests', function() {\n    it('Response time should be below 20000ms', function() {\n        pm.response.responseTime.should.be.below(20000);\n    });\n    it('Response statusCode should be 201 CREATED', function() {\n        response.should.have.status(201);\n    });\n    it('Response header should have Content-Type of application/json', function() {\n        response.should.have.header('content-type', 'application/json');\n    });\n    it('Response body be in JSON format', function() {\n        response.should.be.json; \n    });\n});"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"_postman_id": "968a17ff-94f4-4c68-aef0-438804e5d06f",
					"name": "CFMS-Install-Citizen-Response-Tests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "8cebcf78-f5a2-4694-b108-60e146791a78",
								"type": "text/javascript",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"citizen_response_test\", jsonData.data);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "var schema = {\n    \"properties\" : {\n        \"start_time\" : {\n            \"type\" : \"string\"\n        },\n        \"citizen_name\" : {\n            \"type\" : [\"string\", \"null\"]\n        },\n        \"citizen_id\" : {\n            \"type\" : [\"number\", \"object\"]\n        },\n        \"qt_xn_citizen_ind\" : {\n            \"type\" : \"number\"\n        },\n        \"ticket_number\" : {\n            \"type\" : [\"string\", \"null\"]\n        },\n        \"service_reqs\" : {\n            \"type\" : \"array\"\n        },\n        \"office_id\" : {\n            \"type\" : [\"object\", \"number\"]\n        },\n        \"cs\" : {\n            \"type\" : \"object\"\n        },\n        \"citizen_comments\" : {\n            \"type\" : [\"string\", \"null\"]\n        },\n        \n    },\n    \"required\" : [\"start_time\", \"citizen_name\", \"citizen_id\",\n                  \"qt_xn_citizen_ind\", \"ticket_number\", \"service_reqs\",\n                  \"office_id\", \"cs\", \"citizen_comments\"]\n};\n\n//  Declare, initialize variables.\nvar allElements = null;\n\nif (jsonData.hasOwnProperty(\"citizens\")) {\n\tallElements = jsonData.citizens;\n};\n\nif (jsonData.hasOwnProperty(\"citizen\")) {\n\tallElements = [];\n\tallElements.push(jsonData.citizen);\n};\n\nvar elementCount = 0;\n\n//  If there are some citizens, proceed with tests.\nif (allElements !== null) {\n\n    //  Loop to validate schema of each channel, create list of citizen ids.\n    allElements.forEach(function(element) {\n        elementCount ++;\n        var testTitle = \"Citizen (\" + elementCount + \"): \" + element.citizen_id + \" - \";\n        tests[testTitle + \"conforms to schema\"] = tv4.validate(element, schema);\n\n        //  Test the authenticate response.\n        describe(\"--> \" + testTitle + \"fields have valid values\", function() {\n            it('qt_xn_citizen_ind must be 0 or 1', function() {\n                element.qt_xn_citizen_ind.should.be.within(0,1);\n            });\n        });\n    });\n};"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"_postman_id": "dc16476b-63ff-4a4d-98db-78b39301942c",
					"name": "CFMS-Install-Service-Response-Tests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "0e6c4264-28b3-4a49-b6bb-1199aef2cb13",
								"type": "text/javascript",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"service_response_test\", jsonData.data);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "var schema = {\n    \"properties\" : {\n        \"sr_id\" : {\n            \"type\" : [\"object\", \"number\"]\n        },\n        \"sr_state\" : {\n            \"type\" : \"object\"\n        },\n        \"periods\" : {\n            \"type\" : \"array\"\n        },\n        \"service\" : {\n            \"type\" : \"object\"\n        },\n        \"citizen\" : {\n            \"type\" : [\"object\", \"number\"]\n        },\n        \"quantity\" : {\n            \"type\" : \"number\"\n        },\n        \"service_id\" : {\n            \"type\" : [\"object\", \"number\"]\n        },\n        \"citizen_id\" : {\n            \"type\" : [\"object\", \"number\"]\n        },\n        \"channel\" : {\n        \t\"type\" : \"object\"\n        },\n        \"channel_id\" : {\n        \t\"type\" : [\"object\", \"number\"]\n        }\n        \n    },\n    \"required\" : [\n    \t\"sr_id\", \"sr_state\", \"periods\", \"service\", \"citizen\", \"quantity\",\n    \t\"service_id\", \"citizen_id\", \"channel\", \"channel_id\"\n    ]\n};\n\n//  Declare, initialize variables.\nvar allElements = null;\n\nif (jsonData.hasOwnProperty(\"service_requests\")) {\n\tallElements = jsonData.service_requests;\n};\n\nif (jsonData.hasOwnProperty(\"service_request\")) {\n    allElements = [];\n\tallElements.push(jsonData.service_request);\n}\n\nvar elementCount = 0;\n\n//  If there are some service requests, proceed with tests.\nif (allElements !== null) {\n\n    //  Loop to validate schema of each service request.\n    allElements.forEach(function(element) {\n        elementCount ++;\n        var testTitle = \"Service Request (\" + elementCount + \"): \" + element.sr_id + \" - \";\n        tests[testTitle + \"conforms to schema\"] = tv4.validate(element, schema);\n    });\n};"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"_postman_id": "408283b4-92e1-4cf5-888b-a1c06526e896",
					"name": "CFMS-Install-Get-Active-Citizens-Tests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "8856712d-73ca-4172-89ba-590e8b015c6b",
								"type": "text/javascript",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"get_active_citizens_test\", jsonData.data);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "//  Declare and initialize variables.\nvar elementCount = 0;\nvar srCount = 0;\nvar isFirstCitizen = true;\n\n\n//  Loop to create list of active citizen ids.\nallElements.forEach(function(element) {\n    srCount = element.service_reqs.length;\n\n    //  If citizen active, add to the list.\n    if (element.cs.cs_state_name === \"Active\") {\n        //console.log(\"Citizen (\" + elementCount + \") \" + element.citizen_id +\n        //    \" Active: SRCount = \" + srCount);\n        citizenIds.push(element.citizen_id);\n\n        //  Save the first citizen.\n        if (isFirstCitizen) {\n            currentCitizen = element;\n            isFirstCitizen = false;\n        }\n    }\n        \n    //  Increment count.\n    elementCount++;\n});"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				}
			],
			"description": "This folder performs basic authentication features."
		},
		{
			"_postman_id": "9e975d14-b1f0-4e5b-ad16-121b1734c489",
			"name": "Check app health",
			"item": [
				{
					"_postman_id": "a8b652c8-9080-42f1-bb9f-bdb178a0af9b",
					"name": "Check the healthz endpoint",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "74adc5ce-caa5-452a-bd96-8ac90a4c11d7",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD",
									"eval(globals.postmanBDD);",
									"",
									"//  Perform the standard tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Test the authenticate response.",
									"describe('Testing application health', function() {",
									"    it(\"Response should have 'message' property\", function() {",
									"        var jsonData = response.body;",
									"        jsonData.should.have.property('message');",
									"    });",
									"    it(\"Response message should be 'api is healthy'\", function() {",
									"        var jsonData = response.body;",
									"        jsonData.message.should.equal('api is healthy');",
									"    });",
									"});",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "9e00b481-ef9a-440b-8e83-025fc49026c4",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {},
						"url": {
							"raw": "{{url}}healthz/",
							"host": [
								"{{url}}healthz"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				},
				{
					"_postman_id": "f7916c94-9913-4124-a1d1-7889afae809a",
					"name": "Check the readyz endpoint",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "661c33c4-4a3d-4396-a549-9969edafbfa6",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD",
									"eval(globals.postmanBDD);",
									"",
									"//  Perform the standard tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Test the authenticate response.",
									"describe('Testing application readiness', function() {",
									"    it(\"Response should have 'message' property\", function() {",
									"        var jsonData = response.body;",
									"        jsonData.should.have.property('message');",
									"    });",
									"    it(\"Response message should be 'api is healthy'\", function() {",
									"        var jsonData = response.body;",
									"        jsonData.message.should.equal('api is ready');",
									"    });",
									"});",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "9e00b481-ef9a-440b-8e83-025fc49026c4",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {},
						"url": {
							"raw": "{{url}}readyz/",
							"host": [
								"{{url}}readyz"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				}
			],
			"description": "Checks the application health by calling the healthz and readyz endpoints"
		},
		{
			"_postman_id": "0de96558-1b28-41bf-9eb9-a26f85083def",
			"name": "Check user login",
			"item": [
				{
					"_postman_id": "334c8a4e-5ac3-4165-845f-d035b52ce1d5",
					"name": "Authenticate default QTxn user",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c9ba8080-c323-42e4-8bdb-6c552d4d482b",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD",
									"eval(globals.postmanBDD);",
									"",
									"//  Test the authenticate response.",
									"describe('Testing authentication ' + pm.environment.get(\"userid\"), function() {",
									"    it('Response time should be below 5000ms', function() {",
									"        pm.response.responseTime.should.be.below(5000);",
									"    });",
									"   it('Response statusCode should be 200', function() {",
									"     response.should.have.status(200);",
									"   });",
									"   it('Response header should have Content-Type of application/json', function() {",
									"    response.should.have.header('content-type', 'application/json');",
									"   });",
									"   it('Response body be in JSON format', function() {",
									"      response.should.be.json; ",
									"   });",
									"   it(\"Response should have expected properties\", function() {",
									"       var jsonData = response.body;",
									"       jsonData.should.have.property('access_token');",
									"       jsonData.should.have.property('refresh_token');",
									"       jsonData.should.have.property('expires_in');",
									"       jsonData.should.have.property('refresh_expires_in');",
									"   });",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"token\", jsonData.access_token);",
									"pm.environment.set(\"refresh_token\", jsonData.refresh_token);",
									"pm.environment.set(\"token_expires\", Date.now()+(jsonData.expires_in * 1000));",
									"pm.environment.set(\"refresh_token_expires\", Date.now()+(jsonData.refresh_expires_in * 1000));",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "grant_type=password&client_id={{clientid}}&username={{userid}}&password={{password}}&client_secret={{client_secret}}"
						},
						"url": {
							"raw": "{{auth_url}}/auth/realms/{{realm}}/protocol/openid-connect/token?Content-Type=application/x-www-form-urlencoded",
							"host": [
								"{{auth_url}}"
							],
							"path": [
								"auth",
								"realms",
								"{{realm}}",
								"protocol",
								"openid-connect",
								"token"
							],
							"query": [
								{
									"key": "Content-Type",
									"value": "application/x-www-form-urlencoded"
								}
							]
						},
						"description": "Make sure the operator ID can log in"
					},
					"response": []
				},
				{
					"_postman_id": "885ce0d9-7329-4f65-afac-65322f84d1be",
					"name": "Authenticate NonQTxn user",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "bb3fda97-b9c4-44bb-96da-a04e82f3d850",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD",
									"eval(globals.postmanBDD);",
									"",
									"//  Test the authenticate response.",
									"describe('Testing authentication ' + pm.environment.get(\"userid\"), function() {",
									"    it('Response time should be below 5000ms', function() {",
									"        pm.response.responseTime.should.be.below(5000);",
									"    });",
									"   it('Response statusCode should be 200', function() {",
									"     response.should.have.status(200);",
									"   });",
									"   it('Response header should have Content-Type of application/json', function() {",
									"    response.should.have.header('content-type', 'application/json');",
									"   });",
									"   it('Response body be in JSON format', function() {",
									"      response.should.be.json; ",
									"   });",
									"   it(\"Response should have expected properties\", function() {",
									"       var jsonData = response.body;",
									"       jsonData.should.have.property('access_token');",
									"       jsonData.should.have.property('refresh_token');",
									"       jsonData.should.have.property('expires_in');",
									"       jsonData.should.have.property('refresh_expires_in');",
									"   });",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"token_nonqtxn\", jsonData.access_token);",
									"pm.environment.set(\"refresh_token_nonqtxn\", jsonData.refresh_token);",
									"pm.environment.set(\"token_expires_nonqtxn\", Date.now()+(jsonData.expires_in * 1000));",
									"pm.environment.set(\"refresh_token_expires_nonqtxn\", Date.now()+(jsonData.refresh_expires_in * 1000));",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "grant_type=password&client_id={{clientid}}&username={{userid_nonqtxn}}&password={{password_nonqtxn}}&client_secret={{client_secret}}"
						},
						"url": {
							"raw": "{{auth_url}}/auth/realms/{{realm}}/protocol/openid-connect/token?Content-Type=application/x-www-form-urlencoded",
							"host": [
								"{{auth_url}}"
							],
							"path": [
								"auth",
								"realms",
								"{{realm}}",
								"protocol",
								"openid-connect",
								"token"
							],
							"query": [
								{
									"key": "Content-Type",
									"value": "application/x-www-form-urlencoded"
								}
							]
						},
						"description": "Make sure the operator ID can log in"
					},
					"response": []
				}
			]
		},
		{
			"_postman_id": "5b76d887-6054-4765-94b6-0dd9d3f487e4",
			"name": "Check channels",
			"item": [
				{
					"_postman_id": "d097193c-5de8-465a-a5af-bf0a3efffca6",
					"name": "Get channels",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "fdb881ae-aeb4-4ec1-a005-95ded24f55b0",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "ec5e638f-76b0-4f24-8d93-458c1e2dba35",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run basic tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"var schema = {",
									"    \"properties\" : {",
									"        \"channel_name\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"channel_id\" : {",
									"            \"type\" : [\"number\", \"object\"]",
									"        }",
									"    },",
									"    \"required\" : [\"channel_name\", \"channel_id\"]",
									"};",
									"",
									"//  Loop to validate schema of each channel.",
									"var allChannels = jsonData.channels;",
									"var channelCount = 0;",
									"var phoneId = 0;",
									"allChannels.forEach(function(channel) {",
									"    channelCount ++;",
									"    var testTitle = \"Channel (\" + channelCount + \"): ID \" + channel.channel_id + \" Name \" + channel.channel_name + \" conforms to schema\";",
									"    tests[testTitle] = tv4.validate(channel, schema);",
									"    if (channel.channel_name === \"Telephone\") {",
									"        phoneId = channel.channel_id;",
									"    }",
									"    if (channel.channel_name === \"Email\") {",
									"        emailId = channel.channel_id;",
									"    }",
									"});",
									"",
									"//  Check that you found the phone ID.",
									"describe(\"Found the two channel IDs\", function() {",
									"    it('Telephone id ' + phoneId + ' was found (not equal to 0)', function() {",
									"        phoneId.should.not.be.eql(0);",
									"    });",
									"    it('Email id ' + emailId + ' was found (not equal to 0)', function() {",
									"        emailId.should.not.be.eql(0);",
									"    });",
									"});",
									"",
									"//  Store this ID for future use.",
									"postman.setEnvironmentVariable(\"channel_telephone_id\", JSON.stringify(phoneId));",
									"postman.setEnvironmentVariable(\"channel_email_id\", JSON.stringify(emailId));"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {},
						"url": {
							"raw": "{{url}}channels/",
							"host": [
								"{{url}}channels"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			]
		},
		{
			"_postman_id": "198ead74-0646-47aa-9d4e-f8960e795b9f",
			"name": "Check categories",
			"item": [
				{
					"_postman_id": "7e343853-f309-45dc-9d4e-c861826e6c18",
					"name": "Get categories",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "e99f23ee-5a03-43d9-9075-75dbf06aadcc",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "1a9c9ff5-8475-4dd2-a6c7-ffb5d4689145",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run basic tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"var schema = {",
									"    \"properties\" : {",
									"        \"display_dashboard_ind\" : {",
									"            \"type\" : \"number\"",
									"        },",
									"        \"deleted\" : {",
									"            \"type\" : [\"object\", \"null\"]",
									"        },",
									"        \"actual_service_ind\" : {",
									"            \"type\" : \"number\"",
									"        },",
									"        \"service_id\" : {",
									"            \"type\" : [\"number\", \"object\"]",
									"        },",
									"        \"service_code\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"prefix\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"service_name\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"parent_id\" : {",
									"            \"type\" : [\"object\", \"null\" ]",
									"        },",
									"        \"service_desc\" : {",
									"            \"type\" : \"string\"",
									"        }",
									"    },",
									"    \"required\" : [\"display_dashboard_ind\", \"deleted\", \"actual_service_ind\", \"service_id\", \"service_code\",",
									"                  \"prefix\", \"service_name\", \"parent_id\", \"service_desc\"]",
									"};",
									"",
									"//  Loop to validate schema of each channel.",
									"var allCategories = jsonData.categories;",
									"var categoryCount = 0;",
									"allCategories.forEach(function(category) {",
									"    categoryCount ++;",
									"    var testTitle = \"Category (\" + categoryCount + \"): \" + category.service_name + \" - \";",
									"    tests[testTitle + \"conforms to schema\"] = tv4.validate(category, schema);",
									"    ",
									"    //  Test the authenticate response.",
									"    describe(\"--> \" + testTitle + \"fields have valid values\", function() {",
									"        it('display_dashboard_ind must be 0', function() {",
									"            category.display_dashboard_ind.should.be.eql(0);",
									"        });",
									"        it('actual_service_ind for categories must be 0', function() {",
									"            category.actual_service_ind.should.be.eql(0);",
									"        });",
									"        it('parent_id for categories must be null', function() {",
									"            (category.parent_id === null).should.be.eql(true);",
									"        });",
									"    });",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {},
						"url": {
							"raw": "{{url}}categories/",
							"host": [
								"{{url}}categories"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			]
		},
		{
			"_postman_id": "a72fb805-2593-48a0-a075-563c7ff8d5da",
			"name": "Check services",
			"item": [
				{
					"_postman_id": "2aca6e37-1f31-4dd6-bb2b-65d82da3bf91",
					"name": "Get services",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "d01c3826-dc28-4cce-957b-ec70d0393e7e",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "348f3d58-18e9-4786-a28e-43ac6b0cc3be",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run basic tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"var schema = {",
									"    \"properties\" : {",
									"        \"display_dashboard_ind\" : {",
									"            \"type\" : \"number\"",
									"        },",
									"        \"deleted\" : {",
									"            \"type\" : [\"object\", \"null\"]",
									"        },",
									"        \"actual_service_ind\" : {",
									"            \"type\" : \"number\"",
									"        },",
									"        \"service_id\" : {",
									"            \"type\" : [\"number\", \"object\"]",
									"        },",
									"        \"service_code\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"prefix\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"service_name\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"parent_id\" : {",
									"            \"type\" : [\"object\", \"number\", \"null\" ]",
									"        },",
									"        \"service_desc\" : {",
									"            \"type\" : \"string\"",
									"        }",
									"    },",
									"    \"required\" : [\"display_dashboard_ind\", \"deleted\", \"actual_service_ind\", \"service_id\", \"service_code\",",
									"                  \"prefix\", \"service_name\", \"parent_id\", \"service_desc\"]",
									"};",
									"",
									"//  Loop to validate schema of each channel.",
									"var allElements = jsonData.services;",
									"var elementCount = 0;",
									"var elementMax = Math.min(10, allElements.length);",
									"//allElements.forEach(function(element) {",
									"for (var currentElement = 0; currentElement < elementMax; currentElement++) {",
									"    element = allElements[currentElement];",
									"    elementCount ++;",
									"    var testTitle = \"Service (\" + elementCount + \"): \" + element.service_name + \" - \";",
									"    tests[testTitle + \"conforms to schema\"] = tv4.validate(element, schema);",
									"    ",
									"    //  Test the authenticate response.",
									"    describe(\"--> \" + testTitle + \"fields have valid values\", function() {",
									"        it('display_dashboard_ind must be 0 or 1', function() {",
									"            element.display_dashboard_ind.should.be.within(0,1);",
									"        });",
									"        it('actual_service_ind for services must be 1', function() {",
									"            //  Test for only returning services.",
									"            element.actual_service_ind.should.be.eql(1);",
									"            //  Test for returning services and categories.",
									"            // element.actual_service_ind.should.be.within(0,1);",
									"        });",
									"        //  Test for only returning services",
									"        it('parent_id for categories must not be null', function() {",
									"            (element.parent_id === null).should.be.eql(false);",
									"        });",
									"    });",
									"//});",
									"}",
									"",
									"//  Declare and initialize variables.",
									"var mspId = 0;",
									"var taxId = 0;",
									"",
									"//  Look for the MSP and Property Tax IDs.",
									"allElements.forEach(function(element) {",
									"    if (element.service_name === 'MSP') {",
									"        mspId = element.service_id;",
									"    }",
									"    if (element.service_name === \"Property Taxes\") {",
									"        taxId = element.service_id;",
									"    }",
									"});",
									"",
									"//  Check that you found these IDs.",
									"describe(\"Found the MSP and Property Taxes IDs\", function() {",
									"    ",
									"    it('MSP id was found (was ' + mspId + ', not equal to 0)', function() {",
									"        mspId.should.not.be.eql(0);",
									"    });",
									"    it('Property Taxes id was found (was ' + taxId + ', not equal to 0)', function() {",
									"        taxId.should.not.be.eql(0);",
									"    });",
									"});",
									"",
									"//  Store these IDs for future use.",
									"postman.setEnvironmentVariable(\"service_MSP_id\", JSON.stringify(mspId));",
									"postman.setEnvironmentVariable(\"service_PropTax_id\", JSON.stringify(taxId));"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {},
						"url": {
							"raw": "{{url}}services/",
							"host": [
								"{{url}}services"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			]
		},
		{
			"_postman_id": "6f329a72-634a-4e8c-9e1c-da1452c2492e",
			"name": "Check token handling",
			"item": [
				{
					"_postman_id": "88c2cb26-ddd2-4005-8a4f-7985ad157216",
					"name": "Get client list no token",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "f94771e0-0fb1-46ac-8e92-398f05ab331f",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "e8e0f729-56df-4623-9891-b900a0a06d8e",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD",
									"eval(globals.postmanBDD);",
									"",
									"//  Test the authenticate response.",
									"describe('Testing clients endpoint, no authentication', function() {",
									"  it('Response statusCode should be 401 UNAUTHORIZED', function() {",
									"     response.should.have.status(401);",
									"  });",
									"  it('Response header should have Content-Type of application/json', function() {",
									"    response.should.have.header('content-type', 'application/json');",
									"  });",
									"  it('Response body be in JSON format', function() {",
									"      response.should.be.json; ",
									"  });",
									"  it(\"Response should have 'error' and 'error_description' properties\", function() {",
									"      //var jsonData = pm.response.replaceAll(\"^\\\"|\\\"$\",\"\").replace(\"\\\\\\\"\", \"\\\"\").json();",
									"      var jsonData = JSON.parse(response.body);",
									"      jsonData.should.have.property(\"error\");",
									"      jsonData.should.have.property(\"error_description\");",
									"  });",
									"});",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "a8412524-40b9-4574-a6ab-98d1dabe5371",
					"name": "Get client list invalid token",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "0ffd34b9-5a4b-4ec6-a9b6-05bf2afef3c4",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "2cef61b0-08bf-44fc-b90d-8f9643f67896",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD",
									"eval(globals.postmanBDD);",
									"",
									"//  Test the authenticate response.",
									"describe('Testing clients endpoint, invalid authentication', function() {",
									"   it('Response statusCode should be 401 UNAUTHORIZED', function() {",
									"     response.should.have.status(401);",
									"   });",
									"   it('Response header should have Content-Type of application/json', function() {",
									"    response.should.have.header('content-type', 'application/json');",
									"   });",
									"   it('Response body be in JSON format', function() {",
									"      response.should.be.json; ",
									"   });",
									"   it(\"Response should have 'error' and 'error_description' properties\", function() {",
									"       //var jsonData = pm.response.replaceAll(\"^\\\"|\\\"$\",\"\").replace(\"\\\\\\\"\", \"\\\"\").json();",
									"       var jsonData = JSON.parse(response.body);",
									"       jsonData.should.have.property(\"error\");",
									"       jsonData.should.have.property(\"error_description\");",
									"   });",
									"});",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer andDUF9sV18wd1V2b1NzV3F6NVFtRlFFIn0.eyJqdGkiOiIzMWU0M2E4"
							}
						],
						"body": {},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "d9486cf0-581e-4f19-913e-43852ab34b16",
					"name": "Get client list valid token",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "ad06e274-f574-45d3-8522-d93fdfcd31f3",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "dde1b21d-05a7-493a-837e-f230731b0b8d",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Delete all but two of the citizens.",
									"while (jsonData.citizens.length > 2) {",
									"    jsonData.citizens.pop();",
									"}",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			]
		},
		{
			"_postman_id": "11e19f79-b8e7-4873-9925-ed2ef84df6f1",
			"name": "Clear queue for tests",
			"item": [
				{
					"_postman_id": "8ab03fef-3a1c-40aa-ace8-858a8dd78c24",
					"name": "Delete citizen queue driver",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "7f6d8d4e-e4fe-451f-a5d9-119fcefcd527",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "0ae97852-f223-40e5-bb25-12daa7866f6b",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Delete citizens, if there are any.",
									"    if (citizenIds.length > 0) {",
									"        ",
									"        //  Set the current_client, to be deleted.",
									"        postman.setEnvironmentVariable(\"current_client\", JSON.stringify(citizenIds.shift()));",
									"        postman.setEnvironmentVariable(\"current_queue\", JSON.stringify(citizenIds));",
									"    ",
									"        if (currentCitizen.service_reqs.length === 0) {",
									"            console.log(\"Current citizen \" + currentCitizen.citizen_id + \" has no service requests\");",
									"            //postman.setNextRequest(\"Next citizen left\");",
									"            //  Temporary kludge.  Citizen left not working, so add SR, then delete.",
									"            postman.setNextRequest(\"Temporary add MSP service request\");",
									"        }",
									"    ",
									"        else {",
									"            console.log(\"Current citizen \" + currentCitizen.citizen_id + \" has \" +",
									"                currentCitizen.service_reqs.length + \"  service request(s)\");",
									"            postman.setNextRequest(\"Next citizen finish service\");",
									"        }",
									"    }",
									"    ",
									"    //  No more citizens.  Clear the current, queue variables.",
									"    else {",
									"        console.log(\"Citizen queue is empty\");",
									"        postman.setEnvironmentVariable(\"current_client\", JSON.stringify(\"\"));",
									"        postman.setEnvironmentVariable(\"current_queue\", JSON.stringify(\"\"));",
									"        postman.setNextRequest(\"End clear queue via healthz endpoint\");",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "e955606f-8d38-4511-b883-c0cbb642b7cf",
					"name": "Next citizen finish service",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "e516a2b7-0555-43b5-8058-ccd92b5b6e95",
								"type": "text/javascript",
								"exec": [
									"// Install postmanBDD",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"// Ensure citizen to be deleted was citizen actually deleted.",
									"//var citizenIds = JSON.parse(postman.getEnvironmentVariable(\"current_queue\"));",
									"",
									"var citizenToBeDeleted = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"var citizenData = jsonData.citizen;",
									"var testTitle = \"Check citizen finish service\";",
									"",
									"//  Test the authenticate response.",
									"describe(testTitle, function() {",
									"    it('Response should have property \"citizen\"', function() {",
									"        jsonData.hasOwnProperty(\"citizen\").should.equal(true);",
									"    });",
									"    it('Response should not have have property \"message\" indicating an error', function() {",
									"        jsonData.hasOwnProperty(\"message\").should.equal(false);",
									"    });",
									"    it('Citizen marked as finished should be citizen ' + citizenToBeDeleted, function() {",
									"        citizenData.citizen_id.should.eql(citizenToBeDeleted);",
									"    });",
									"});",
									"",
									"//  Go back to the delete citizen queue driver.",
									"postman.setNextRequest(\"Delete citizen queue driver\");",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/finish_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"finish_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "24c2c15e-4047-4dd1-9513-782c2bb27d53",
					"name": "Next citizen citizen left",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "6caff547-493f-4f0d-a121-f8e3398f11c3",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = jsonData.citizen;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get environment variables.",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct citizen left\", function() {",
									"        it('Must be only one citizen that left', function() {",
									"            citizenIds.length.should.be.eql(0);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"    });",
									"}",
									"",
									"//  Go back to the delete citizen queue driver.",
									"postman.setNextRequest(\"Delete citizen queue driver\");",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/citizen_left/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"citizen_left",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "aae7ac33-2db2-4260-b437-9e7256fe3fec",
					"name": "Temporary add MSP service request",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "c2ec515b-209f-4d91-81c1-c72a14600685",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run create tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"var svcReq = jsonData.service_request;",
									"",
									"console.log(svcReq);",
									"",
									"//  Set schema of the service_request property.",
									"var schema = {",
									"    \"properties\" : {",
									"        \"periods\" : {",
									"            \"type\" : \"array\"",
									"        },",
									"        \"service_id\" : {",
									"            \"type\" : [\"number\", \"object\"]",
									"        },",
									"        \"service\" : {",
									"            \"type\" : \"object\"",
									"        },",
									"        \"sr_state\" : {",
									"            \"type\" : \"object\"",
									"        },",
									"        \"quantity\" : {",
									"            \"type\" : \"number\"",
									"        },",
									"        \"sr_id\" : {",
									"            \"type\" : [\"number\", \"object\"]",
									"        },",
									"        \"citizen\" : {",
									"            \"type\" :[\"number\", \"object\"]",
									"        },",
									"        \"citizen_id\" : {",
									"            \"type\" : [\"number\", \"object\"]",
									"        },",
									"        \"channel\" : {",
									"            \"type\" : \"object\"",
									"        },",
									"        \"channel_id\" : {",
									"            \"type\" : [\"number\", \"object\"]",
									"        }",
									"    },",
									"    // \"required\" : [\"periods\", \"service_id\", \"sr_state_id\", \"service\"]",
									"    \"required\" : [\"periods\", \"service_id\", \"service\", \"sr_state\", \"quantity\", \"sr_id\",",
									"                  \"citizen\", \"citizen_id\", \"channel\", \"channel_id\"]",
									"};",
									"",
									"//  Check the result.",
									"describe(\"Response schema is correct\", function() {",
									"    it('service_request property present', function() {",
									"        jsonData.should.have.property(\"service_request\");",
									"    });",
									"    it('errors property present', function() {",
									"        jsonData.should.have.property(\"errors\");",
									"    });",
									"    tests[\"service_request property has correct schema\"] = tv4.validate(svcReq, schema);",
									"});",
									"",
									"//  Go back to the clear citizen driver.",
									"postman.setNextRequest(\"Next citizen finish service\");",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_request\" : {\n\t\t\"service_id\" : {{service_MSP_id}},\n\t\t\"citizen_id\" : {{current_client}},\n\t\t\"quantity\" : 1,\n\t\t\"channel_id\" : {{channel_telephone_id}}\n\t}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "cca832fd-2f4e-41fe-9bae-1c2751f66f93",
					"name": "End clear queue via healthz endpoint",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "74adc5ce-caa5-452a-bd96-8ac90a4c11d7",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD",
									"eval(globals.postmanBDD);",
									"",
									"//  Perform the standard tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Test the authenticate response.",
									"describe('Testing application health', function() {",
									"    it(\"Response should have 'message' property\", function() {",
									"        var jsonData = response.body;",
									"        jsonData.should.have.property('message');",
									"    });",
									"    it(\"Response message should be 'api is healthy'\", function() {",
									"        var jsonData = response.body;",
									"        jsonData.message.should.equal('api is healthy');",
									"    });",
									"});",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "9e00b481-ef9a-440b-8e83-025fc49026c4",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {},
						"url": {
							"raw": "{{url}}healthz/",
							"host": [
								"{{url}}healthz"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"_postman_id": "b70561ef-4b2a-4c33-9089-d3d1a637b144",
			"name": "Check citizen through queue",
			"item": [
				{
					"_postman_id": "f7289591-a0a9-4b55-a6f4-e6a8e5e7a19f",
					"name": "Check no citizens",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "9f95832a-57ef-4dcf-bdfe-916d2eb5d006",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "2cbca8d4-50d9-4dde-9239-af3c987949b8",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var allOK = true;",
									"",
									"//  If citizen property was present.",
									"if (allElements !== null) {",
									"",
									"    //  Make sure it had a length of 0.",
									"    if (allElements.length !== 0) {",
									"        allOK = false;",
									"    }",
									"}",
									"",
									"describe(\"There should be no citizens in the office\", function() {",
									"    it(\"Length of citizen queue should be 0\", function() {",
									"        allOK.should.be.eql(true);",
									"    });",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "7eb7fba2-0de8-4ecd-a766-ecbdaad765e7",
					"name": "Create citizen",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "7896261d-7d88-4eba-860b-98472655c4a7",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for one added citizen, correct initial values\", function() {",
									"        it('Only one citizen should be created', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_name must be null', function() {",
									"            (!currentCitizen.citizen_name).should.be.eql(true);",
									"        });",
									"        it('citizen_comments must be null', function() {",
									"            (!currentCitizen.citizen_comments).should.be.eql(true);",
									"        });",
									"        it('service_reqs must empty (no service requests)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(0);",
									"        });",
									"    });",
									"",
									"    //  Store the ID of the citizen just created.",
									"    postman.setEnvironmentVariable(\"current_client\", JSON.stringify(citizenIds.shift()));",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "1bf8d0b7-79ff-44ff-94ab-f9670310fb8b",
					"name": "Edit specific citizen",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "b72e7756-5de1-4a13-9609-8917ea63dee7",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									"",
									"// //  Get data, create JSON body.",
									"// var citizenName = postman.getEnvironmentVariable(\"citizen_name\");",
									"// var citizenComments = postman.getEnvironmentVariable(\"citizen_comment\");",
									"// var bodyData = {",
									"//     \"citizen_name\" : citizenName,",
									"//     \"citizen_comments\" : citizenComments",
									"// }",
									"",
									"// //  Store the data in an environment variable.",
									"// postman.setEnvironmentVariable(\"putBody\", JSON.stringify(bodyData));"
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "73110fdd-6476-403d-b6c9-c108032fbd66",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct citizen updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs must empty (no service requests)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(0);",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"citizen_name\" : {{citizen_name}},\n    \"citizen_comments\" : {{citizen_comment}}\n}"
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "14be6893-4a25-4189-9bab-4ea9e6d9ed68",
					"name": "Add property tax via phone service request",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "fa6f6a3b-e4e7-42b6-a8d3-ecda3840418a",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.create_response_test);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_request\" : {\n\t\t\"service_id\" : {{service_PropTax_id}},\n\t\t\"citizen_id\" : {{current_client}},\n\t\t\"quantity\" : {{citizen_quantity}},\n\t\t\"channel_id\" : {{channel_telephone_id}}\n\t}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "bf9b5ee5-b525-48db-ab62-e673f89aceb1",
					"name": "List specific citizen",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "66ca9683-be00-478b-92c0-6ac698d9088b",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Active\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Active\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 1 (single period)', function() {",
									"            (currentCitizen.service_reqs[0].periods.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs periods channel must be ' + citizenChannel, function() {",
									"            (currentCitizen.service_reqs[0].channel_id).should.be.eql(citizenChannel);",
									"        });",
									"        it('service_reqs periods state must be \"Ticket Creation\"', function() {",
									"            (currentCitizen.service_reqs[0].periods[0].ps.ps_name).should.be.eql(\"Ticket Creation\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "4a3b994e-6e22-49eb-8760-35ae0fd29848",
					"name": "Add citizen to queue",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "8a294876-edfa-4d5b-ada4-399f5339cd8f",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Pending\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Pending\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 2 (now two periods)', function() {",
									"            (allPeriods.length).should.be.eql(2);",
									"        });",
									"        it('must only be one open period', function() {",
									"            openPeriodCount.should.be.eql(1);",
									"        });",
									"        it('open period state must be \"Waiting\"', function() {",
									"            openPeriod.ps.ps_name.should.be.eql(\"Waiting\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/add_to_queue/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"add_to_queue",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "a9dc6b57-2f25-472d-b1d3-a42fee1ebc67",
					"name": "Invite specific citizen",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "7884b553-77a8-46e6-a1de-d8bee02ca6ff",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Pending\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Pending\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 3 (now three periods)', function() {",
									"            (allPeriods.length).should.be.eql(3);",
									"        });",
									"        it('must only be one open period', function() {",
									"            openPeriodCount.should.be.eql(1);",
									"        });",
									"        it('open period state must be \"Invited\"', function() {",
									"            openPeriod.ps.ps_name.should.be.eql(\"Invited\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/invite/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"invite",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "f1ae1973-3618-41cd-8189-e7e078d27958",
					"name": "Begin serving citizen",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "1b1f7f66-04cd-4f10-bfa2-c4f3fffe8715",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Active\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Active\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 4 (now four periods)', function() {",
									"            (allPeriods.length).should.be.eql(4);",
									"        });",
									"        it('must only be one open period', function() {",
									"            openPeriodCount.should.be.eql(1);",
									"        });",
									"        it('open period state must be \"Being Served\"', function() {",
									"            openPeriod.ps.ps_name.should.be.eql(\"Being Served\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/begin_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"begin_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "450e7ba4-c7b6-4468-b1f1-da0aa58e4ad1",
					"name": "Finish serving citizen",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "717581c1-04ab-4b48-b3b5-75ca3ccda53e",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = jsonData.citizen;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be no active citizens in the office', function() {",
									"            citizenIds.length.should.be.eql(0);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Complete\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Complete\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 4 (still four periods)', function() {",
									"            (allPeriods.length).should.be.eql(4);",
									"        });",
									"        it('must be no open periods (service is complete', function() {",
									"            openPeriodCount.should.be.eql(0);",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/finish_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"finish_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			]
		},
		{
			"_postman_id": "197652e9-06cb-45e0-88c6-629d1c6cd154",
			"name": "Check citizen begin-hold-finish",
			"item": [
				{
					"_postman_id": "b9e08e38-6f2d-47f6-bf88-823ffa4a1cc1",
					"name": "Check no citizens",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "3d9d9302-3b15-49f0-8bb2-3de1f4d134b8",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "2cbca8d4-50d9-4dde-9239-af3c987949b8",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var allOK = true;",
									"",
									"//  If citizen property was present.",
									"if (allElements !== null) {",
									"",
									"    //  Make sure it had a length of 0.",
									"    if (allElements.length !== 0) {",
									"        allOK = false;",
									"    }",
									"}",
									"",
									"describe(\"There should be no citizens in the office\", function() {",
									"    it(\"Length of citizen queue should be 0\", function() {",
									"        allOK.should.be.eql(true);",
									"    });",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "4e4027be-d0ca-43e0-80b5-a13f5f670a9b",
					"name": "Create citizen",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "e77d15de-91e2-4528-87bd-5734405b4def",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for one added citizen, correct initial values\", function() {",
									"        it('Only one citizen should be created', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_name must be null', function() {",
									"            (!currentCitizen.citizen_name).should.be.eql(true);",
									"        });",
									"        it('citizen_comments must be null', function() {",
									"            (!currentCitizen.citizen_comments).should.be.eql(true);",
									"        });",
									"        it('service_reqs must empty (no service requests)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(0);",
									"        });",
									"    });",
									"",
									"    //  Store the ID of the citizen just created.",
									"    postman.setEnvironmentVariable(\"current_client\", JSON.stringify(citizenIds.shift()));",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "b4629aac-637a-48e2-b383-6b223ea96735",
					"name": "Edit specific citizen",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "ce732be5-38a3-4825-90d1-4d52babf8917",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									"",
									"// //  Get data, create JSON body.",
									"// var citizenName = postman.getEnvironmentVariable(\"citizen_name\");",
									"// var citizenComments = postman.getEnvironmentVariable(\"citizen_comment\");",
									"// var bodyData = {",
									"//     \"citizen_name\" : citizenName,",
									"//     \"citizen_comments\" : citizenComments",
									"// }",
									"",
									"// //  Store the data in an environment variable.",
									"// postman.setEnvironmentVariable(\"putBody\", JSON.stringify(bodyData));"
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "13828662-748d-4b3f-9ead-454e795f1f01",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct citizen information applied\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs must empty (no service requests)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(0);",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"citizen_name\" : {{citizen_name}},\n    \"citizen_comments\" : {{citizen_comment}}\n}"
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "f0cefa7f-fa2f-48f7-ae8a-e5bf312f01d8",
					"name": "Add property tax via phone service request",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "fa6f6a3b-e4e7-42b6-a8d3-ecda3840418a",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.create_response_test);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_request\" : {\n\t\t\"service_id\" : {{service_PropTax_id}},\n\t\t\"citizen_id\" : {{current_client}},\n\t\t\"quantity\" : {{citizen_quantity}},\n\t\t\"channel_id\" : {{channel_telephone_id}}\n\t}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "0bd4f2b1-a9d4-4908-b60e-e406250f707d",
					"name": "List specific citizen",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "2a57d1b2-9d0c-4e07-ad20-d4dde457f9d1",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service applied\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Active\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Active\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 1 (single period)', function() {",
									"            (currentCitizen.service_reqs[0].periods.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs periods channel must be ' + citizenChannel, function() {",
									"            (currentCitizen.service_reqs[0].channel_id).should.be.eql(citizenChannel);",
									"        });",
									"        it('service_reqs periods state must be \"Ticket Creation\"', function() {",
									"            (currentCitizen.service_reqs[0].periods[0].ps.ps_name).should.be.eql(\"Ticket Creation\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "1495babc-64d3-4691-9ddc-72303fb4adac",
					"name": "Begin serving citizen",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "4550a6b7-560d-48bf-bfc9-41453a8defec",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for begin serving citizen\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Active\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Active\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 2 (now two periods)', function() {",
									"            (allPeriods.length).should.be.eql(2);",
									"        });",
									"        it('must only be one open period', function() {",
									"            openPeriodCount.should.be.eql(1);",
									"        });",
									"        it('open period state must be \"Being Served\"', function() {",
									"            openPeriod.ps.ps_name.should.be.eql(\"Being Served\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/begin_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"begin_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "8e8d08b8-761f-47df-b948-6e9ef2e07c2e",
					"name": "Place citizen on hold",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "dd51a48d-2e1e-47fd-978f-507b77a7901f",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for citizen on hold\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Active\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Active\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 3 (now three periods)', function() {",
									"            (allPeriods.length).should.be.eql(3);",
									"        });",
									"        it('must only be one open period', function() {",
									"            openPeriodCount.should.be.eql(1);",
									"        });",
									"        it('open period state must be \"On hold\"', function() {",
									"            openPeriod.ps.ps_name.should.be.eql(\"On hold\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/place_on_hold/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"place_on_hold",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "9821962a-452a-4502-b1eb-516a98160ae2",
					"name": "Get service requests",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "b7a6d6a2-beb1-43ca-98c7-32c22adb700c",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.service_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get periods for the first service request.",
									"    var allPeriods = allElements[0].periods;",
									"    console.log(\"Number of periods: \" + allPeriods.length);",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    var allPeriodCount = 0;",
									"",
									"    //  Find how many periods there are with null end time.",
									"    //  Also, check schema.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        ",
									"        //  Debug.",
									"        console.log(onePeriod);",
									"        ",
									"        //  Find the open period.",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"        ",
									"        //  Check the schema.  Not working for now.",
									"        //allPeriodCount++;",
									"        //var testTitle = \"Period (\" + allPeriodCount + \"): \" + onePeriod.ps.ps_number + \" - \";",
									"        // tests[testTitle + \"conforms to schema\"] = tv4.validate(onePeriod, schema);",
									"        //tests[testTitle + \"conforms to schema\"] = onePeriod.hasOwnProperty(\"accurate_time_ind\");",
									"    });",
									"}    ",
									"",
									"//  If there are some service requests, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (allElements.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Active\"', function() {",
									"            (allElements[0].sr_state.sr_code).should.be.eql(\"Active\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (allElements[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (allElements[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 3 (now three periods)', function() {",
									"            (allPeriods.length).should.be.eql(3);",
									"        });",
									"        it('must only be one open period', function() {",
									"            openPeriodCount.should.be.eql(1);",
									"        });",
									"        it('open period state must be \"On hold\"', function() {",
									"            openPeriod.ps.ps_name.should.be.eql(\"On hold\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/service_requests/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"service_requests",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "e94fad52-1036-4709-a95c-f7b0aef8d585",
					"name": "Call citizen from hold",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "66563797-2a92-4dbd-946e-7232dcac8260",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for call citizen from hold\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Active\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Active\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 4 (now four periods)', function() {",
									"            (allPeriods.length).should.be.eql(4);",
									"        });",
									"        it('must only be one open period', function() {",
									"            openPeriodCount.should.be.eql(1);",
									"        });",
									"        it('open period state must be \"Being Served\"', function() {",
									"            openPeriod.ps.ps_name.should.be.eql(\"Being Served\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/begin_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"begin_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "5ddcf5dd-1ae2-465e-af5f-06b3cd0d0f2d",
					"name": "Finish serving citizen",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "0f78735c-0c8d-4904-8474-46b3e24fe216",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"    ",
									"    console.log(allElements);",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = allElements[0].service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for citizen finished correctly\", function() {",
									"        it('Must be no active citizens in the office', function() {",
									"            citizenIds.length.should.be.eql(0);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (allElements[0].service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Complete\"', function() {",
									"            (allElements[0].service_reqs[0].sr_state.sr_code).should.be.eql(\"Complete\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (allElements[0].service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (allElements[0].service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 4 (still four periods)', function() {",
									"            (allPeriods.length).should.be.eql(4);",
									"        });",
									"        it('must be no open periods', function() {",
									"            openPeriodCount.should.be.eql(0);",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/finish_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"finish_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			]
		},
		{
			"_postman_id": "f9820c29-3431-4726-89a1-0c5ce7b60aba",
			"name": "Check citizen leave after create",
			"item": [
				{
					"_postman_id": "6c61e225-8d6c-49d1-bbcc-5b9a8a28d2f0",
					"name": "Check no citizens",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "6cb5de42-277f-4c2d-b5ef-64b0f514d5bd",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "2cbca8d4-50d9-4dde-9239-af3c987949b8",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var allOK = true;",
									"",
									"//  If citizen property was present.",
									"if (allElements !== null) {",
									"",
									"    //  Make sure it had a length of 0.",
									"    if (allElements.length !== 0) {",
									"        allOK = false;",
									"    }",
									"}",
									"",
									"describe(\"There should be no citizens in the office\", function() {",
									"    it(\"Length of citizen queue should be 0\", function() {",
									"        allOK.should.be.eql(true);",
									"    });",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "c413860b-d195-4f5c-9809-fd6fdb2beb98",
					"name": "Create citizen",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "061a479c-37b4-4707-b8c6-c31cacadecec",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for one added citizen, correct initial values\", function() {",
									"        it('Only one citizen should be created', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_name must be null', function() {",
									"            (!currentCitizen.citizen_name).should.be.eql(true);",
									"        });",
									"        it('citizen_comments must be null', function() {",
									"            (!currentCitizen.citizen_comments).should.be.eql(true);",
									"        });",
									"        it('service_reqs must empty (no service requests)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(0);",
									"        });",
									"    });",
									"",
									"    //  Store the ID of the citizen just created.",
									"    postman.setEnvironmentVariable(\"current_client\", JSON.stringify(citizenIds.shift()));",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "7be2a6c1-f6b6-4d99-9099-32e1a33e6352",
					"name": "Citizen left",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "16eaefc2-0d16-405e-9e70-e85314da841b",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = jsonData.citizen;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get environment variables.",
									"    var citizenName = postman.getEnvironmentVariable(\"citizen_name\");",
									"    var citizenComment = postman.getEnvironmentVariable(\"citizen_comment\");",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = null;",
									"    if (currentCitizen.service_reqs.length !== 0) {",
									"        var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    }",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    if (allPeriods !== null) {",
									"        allPeriods.forEach(function(onePeriod) {",
									"            if (!onePeriod.time_end) {",
									"                openPeriod = onePeriod;",
									"                openPeriodCount++;",
									"            }",
									"        });",
									"    }",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be no active citizens in the office', function() {",
									"            citizenIds.length.should.be.eql(0);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('service_reqs length must be 0 (no service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(0);",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/citizen_left/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"citizen_left",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			]
		},
		{
			"_postman_id": "5e43c00a-d990-4d5d-b91e-a5ee6d92b1cc",
			"name": "Check citizen leave after waiting",
			"item": [
				{
					"_postman_id": "b4988bed-f007-494d-8767-b95abb5fb8a8",
					"name": "Check no citizens",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "bc24cb66-e882-4b8a-b879-2d287078efab",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "2cbca8d4-50d9-4dde-9239-af3c987949b8",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var allOK = true;",
									"",
									"//  If citizen property was present.",
									"if (allElements !== null) {",
									"",
									"    //  Make sure it had a length of 0.",
									"    if (allElements.length !== 0) {",
									"        allOK = false;",
									"    }",
									"}",
									"",
									"describe(\"There should be no citizens in the office\", function() {",
									"    it(\"Length of citizen queue should be 0\", function() {",
									"        allOK.should.be.eql(true);",
									"    });",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "c6daa03b-d788-4839-b66c-73503f4c312d",
					"name": "Create citizen",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "fcc1415c-0861-4516-8843-bfc3717a76d9",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for one added citizen, correct initial values\", function() {",
									"        it('Only one citizen should be created', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_name must be null', function() {",
									"            (!currentCitizen.citizen_name).should.be.eql(true);",
									"        });",
									"        it('citizen_comments must be null', function() {",
									"            (!currentCitizen.citizen_comments).should.be.eql(true);",
									"        });",
									"        it('service_reqs must empty (no service requests)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(0);",
									"        });",
									"    });",
									"",
									"    //  Store the ID of the citizen just created.",
									"    postman.setEnvironmentVariable(\"current_client\", JSON.stringify(citizenIds.shift()));",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "eec2029b-6061-4557-991c-5d1c463f5bab",
					"name": "Edit specific citizen",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "f26eaedb-5d41-4dcc-b856-aec599440601",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									"",
									"// //  Get data, create JSON body.",
									"// var citizenName = postman.getEnvironmentVariable(\"citizen_name\");",
									"// var citizenComments = postman.getEnvironmentVariable(\"citizen_comment\");",
									"// var bodyData = {",
									"//     \"citizen_name\" : citizenName,",
									"//     \"citizen_comments\" : citizenComments",
									"// }",
									"",
									"// //  Store the data in an environment variable.",
									"// postman.setEnvironmentVariable(\"putBody\", JSON.stringify(bodyData));"
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "e0b48324-0ca2-4b2e-88ef-cbfbe10b5fb7",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct citizen updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs must empty (no service requests)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(0);",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"citizen_name\" : {{citizen_name}},\n    \"citizen_comments\" : {{citizen_comment}}\n}"
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "d7034059-6a38-48b9-a662-6bd501463705",
					"name": "Add property tax via phone service request",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "fa6f6a3b-e4e7-42b6-a8d3-ecda3840418a",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.create_response_test);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_request\" : {\n\t\t\"service_id\" : {{service_PropTax_id}},\n\t\t\"citizen_id\" : {{current_client}},\n\t\t\"quantity\" : {{citizen_quantity}},\n\t\t\"channel_id\" : {{channel_telephone_id}}\n\t}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "580f1916-14bf-4bcb-956c-129d14b140cc",
					"name": "List specific citizen",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "1176fcca-52ff-4e13-b4a4-775ad324a4c6",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Active\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Active\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 1 (single period)', function() {",
									"            (currentCitizen.service_reqs[0].periods.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs periods channel must be ' + citizenChannel, function() {",
									"            (currentCitizen.service_reqs[0].channel_id).should.be.eql(citizenChannel);",
									"        });",
									"        it('service_reqs periods state must be \"Ticket Creation\"', function() {",
									"            (currentCitizen.service_reqs[0].periods[0].ps.ps_name).should.be.eql(\"Ticket Creation\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "e10ad9da-0609-4ce3-8289-28eb12124ce4",
					"name": "Add citizen to queue",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "f0aacc69-ff0e-4ed3-9ef7-f131bbf3a5bd",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Pending\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Pending\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 2 (now two periods)', function() {",
									"            (allPeriods.length).should.be.eql(2);",
									"        });",
									"        it('must only be one open period', function() {",
									"            openPeriodCount.should.be.eql(1);",
									"        });",
									"        it('open period state must be 1', function() {",
									"            openPeriod.ps.ps_name.should.be.eql(\"Waiting\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/add_to_queue/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"add_to_queue",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "6e7db3e8-7d4c-4353-9a9d-997475a09712",
					"name": "Citizen left",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "70d0dff7-802f-4f7c-968d-1b7fdeb0f4fa",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = jsonData.citizen;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be no active citizens in the office', function() {",
									"            citizenIds.length.should.be.eql(0);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Complete\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Complete\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 2 (two periods)', function() {",
									"            (allPeriods.length).should.be.eql(2);",
									"        });",
									"        it('must be no open periods (service is complete', function() {",
									"            openPeriodCount.should.be.eql(0);",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/citizen_left/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"citizen_left",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			]
		},
		{
			"_postman_id": "05fa8745-fb95-4774-bed6-ceb0735c366e",
			"name": "Check update service information",
			"item": [
				{
					"_postman_id": "6b21d232-168e-4747-bfcb-170fb87090e1",
					"name": "Check no citizens",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "4dd23acf-1f43-42be-b965-0b11121f33f3",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "2cbca8d4-50d9-4dde-9239-af3c987949b8",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var allOK = true;",
									"",
									"//  If citizen property was present.",
									"if (allElements !== null) {",
									"",
									"    //  Make sure it had a length of 0.",
									"    if (allElements.length !== 0) {",
									"        allOK = false;",
									"    }",
									"}",
									"",
									"describe(\"There should be no citizens in the office\", function() {",
									"    it(\"Length of citizen queue should be 0\", function() {",
									"        allOK.should.be.eql(true);",
									"    });",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "d416dc72-24ef-4649-9fe0-e1cb646c40d2",
					"name": "Create citizen",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "d3bbd88a-25fd-4fe6-ae7e-359373df02ac",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for one added citizen, correct initial values\", function() {",
									"        it('Only one citizen should be created', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_name must be null', function() {",
									"            (!currentCitizen.citizen_name).should.be.eql(true);",
									"        });",
									"        it('citizen_comments must be null', function() {",
									"            (!currentCitizen.citizen_comments).should.be.eql(true);",
									"        });",
									"        it('service_reqs must empty (no service requests)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(0);",
									"        });",
									"    });",
									"",
									"    //  Store the ID of the citizen just created.",
									"    postman.setEnvironmentVariable(\"current_client\", JSON.stringify(citizenIds.shift()));",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "c4ff5d90-3053-41de-9615-355bfda0b3ed",
					"name": "Edit specific citizen",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "2be395b2-e14c-4ff8-8753-42ea1fe2010d",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									"",
									"// //  Get data, create JSON body.",
									"// var citizenName = postman.getEnvironmentVariable(\"citizen_name\");",
									"// var citizenComments = postman.getEnvironmentVariable(\"citizen_comment\");",
									"// var bodyData = {",
									"//     \"citizen_name\" : citizenName,",
									"//     \"citizen_comments\" : citizenComments",
									"// };",
									"",
									"// //  Store the data in an environment variable.",
									"// postman.setEnvironmentVariable(\"putBody\", JSON.stringify(bodyData));"
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "0ef8b307-a37c-4908-9e31-a7fc781a7257",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"    ",
									"    //  Debug.",
									"    console.log(allElements);",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct citizen updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs must empty (no service requests)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(0);",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"citizen_name\" : {{citizen_name}},\n    \"citizen_comments\" : {{citizen_comment}}\n}"
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "061c64d0-bf97-4e99-88ab-54699a07aabf",
					"name": "Add property tax via phone service request",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "fa6f6a3b-e4e7-42b6-a8d3-ecda3840418a",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.create_response_test);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_request\" : {\n\t\t\"service_id\" : {{service_PropTax_id}},\n\t\t\"citizen_id\" : {{current_client}},\n\t\t\"quantity\" : {{citizen_quantity}},\n\t\t\"channel_id\" : {{channel_telephone_id}}\n\t}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "8b31fa55-ecb4-4f9b-9a24-8cea9cede1e3",
					"name": "List specific citizen",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "3d906a10-51fe-4329-bac0-e69e6847e852",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"    ",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Active\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Active\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 1 (single period)', function() {",
									"            (currentCitizen.service_reqs[0].periods.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs periods channel must be ' + citizenChannel, function() {",
									"            (currentCitizen.service_reqs[0].channel_id).should.be.eql(citizenChannel);",
									"        });",
									"        it('service_reqs periods state must be \"Ticket Creation\"', function() {",
									"            (currentCitizen.service_reqs[0].periods[0].ps.ps_name).should.be.eql(\"Ticket Creation\");",
									"        });",
									"    });",
									"    ",
									"    //  Save the service request ID for later.",
									"    var mySRId = allElements[0].service_reqs[0].sr_id;",
									"    postman.setEnvironmentVariable(\"current_sr_id\", JSON.stringify(mySRId));",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "ba7bff7f-bd92-485d-88a9-f66e0e2a7099",
					"name": "Begin serving citizen",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "ff3a25ca-0df2-40f2-b7a1-9e9b4bde2aab",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Active\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Active\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 2 (now twor periods)', function() {",
									"            (allPeriods.length).should.be.eql(2);",
									"        });",
									"        it('must only be one open period', function() {",
									"            openPeriodCount.should.be.eql(1);",
									"        });",
									"        it('open period state must be \"Being Served\"', function() {",
									"            openPeriod.ps.ps_name.should.be.eql(\"Being Served\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/begin_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"begin_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "1477b426-7aa4-435b-9da8-348a091e7fd5",
					"name": "Update quantity from 3 to 5",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "153a139d-0daa-4031-ba0a-e7204ade2648",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.service_response_test);",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Only check for an updated quantity.  Get environment variables.",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity_update\"));",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct quantity update\", function() {",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (allElements[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"quantity\" : {{citizen_quantity_update}}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/{{current_sr_id}}/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								"{{current_sr_id}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "7af12fb0-d8ad-4d19-9f42-a7eb8222cf6c",
					"name": "Update service from PropTax to MSP",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "8faaa693-a7a4-45ed-9318-325a498a98af",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.service_response_test);",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Only check for an updated quantity.  Get environment variables.",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_MSP_id\"));",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service update\", function() {",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (allElements[0].service_id).should.be.eql(citizenService);",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_id\" : {{service_MSP_id}}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/{{current_sr_id}}/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								"{{current_sr_id}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "b1bd821f-3095-4608-9016-fa0527eee73a",
					"name": "Finish serving citizen",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "4ca8ae22-b658-4e45-b7c6-7d8ab0014400",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = jsonData.citizen;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_MSP_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity_update\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for citizen finished\", function() {",
									"        it('Must be no active citizens in the office', function() {",
									"            citizenIds.length.should.be.eql(0);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Complete\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Complete\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 2 (still four periods)', function() {",
									"            (allPeriods.length).should.be.eql(2);",
									"        });",
									"        it('must be no open periods (service is complete', function() {",
									"            openPeriodCount.should.be.eql(0);",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/finish_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"finish_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			]
		},
		{
			"_postman_id": "8d79087f-b5d4-4f02-a891-e0fdd5ab852a",
			"name": "Check pick qtxn customer",
			"item": [
				{
					"_postman_id": "fd4c5a56-4310-444e-8049-8fee81d16fda",
					"name": "Check no citizens",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "9f95832a-57ef-4dcf-bdfe-916d2eb5d006",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "0aa4fd7b-529c-4f26-9998-c77d6c28eeb4",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var citizenCount = 0;",
									"",
									"//  If citizen property was present.",
									"if (allElements !== null) {",
									"",
									"    //  Get number of citizens in the queue.",
									"    citizenCount = allElements.length;",
									"}",
									"",
									"describe(\"There should be no citizens in the office\", function() {",
									"    it(\"Length of citizen queue should be 0\", function() {",
									"        citizenCount.should.be.eql(0);",
									"    });",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "d7e82f8d-97a5-4c3a-b293-8d15e5d63057",
					"name": "First citizen - Create",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "cac82cd1-b2c1-4019-bf8f-bf8dfed473ef",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for one added citizen, correct initial values\", function() {",
									"        it('Only one citizen should be created', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_name must be null', function() {",
									"            (!currentCitizen.citizen_name).should.be.eql(true);",
									"        });",
									"        it('citizen_comments must be null', function() {",
									"            (!currentCitizen.citizen_comments).should.be.eql(true);",
									"        });",
									"        it('service_reqs must empty (no service requests)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(0);",
									"        });",
									"    });",
									"",
									"    //  Store the ID of the citizen just created.",
									"    postman.setEnvironmentVariable(\"first_client\", JSON.stringify(citizenIds.shift()));",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "c518a2d5-aefc-4d56-9905-9192de9fb82f",
					"name": "First citizen - Edit",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "f52aea38-cdcb-4d0b-8421-0ee5b7486913",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									"",
									"// //  Get data, create JSON body.",
									"// var citizenName = postman.getEnvironmentVariable(\"citizen_name\");",
									"// var citizenComments = postman.getEnvironmentVariable(\"citizen_comment\");",
									"// var bodyData = {",
									"//     \"citizen_name\" : citizenName,",
									"//     \"citizen_comments\" : citizenComments",
									"// }",
									"",
									"// //  Store the data in an environment variable.",
									"// postman.setEnvironmentVariable(\"putBody\", JSON.stringify(bodyData));"
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "a0ded2ba-3a0d-45ff-ac3a-ee25ad2bd578",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"first_client\"));",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct citizen updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs must empty (no service requests)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(0);",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"citizen_name\" : {{citizen_name}},\n    \"citizen_comments\" : {{citizen_comment}}\n}"
						},
						"url": {
							"raw": "{{url}}citizens/{{first_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{first_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "5dcf3d48-e1a3-4312-8fc2-f3dc4454d6e8",
					"name": "First citizen - Prop Tax via phone",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "fa6f6a3b-e4e7-42b6-a8d3-ecda3840418a",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.create_response_test);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_request\" : {\n\t\t\"service_id\" : {{service_PropTax_id}},\n\t\t\"citizen_id\" : {{first_client}},\n\t\t\"quantity\" : {{citizen_quantity}},\n\t\t\"channel_id\" : {{channel_telephone_id}}\n\t}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "89f10994-f9f0-4f6a-b208-63cbffac1639",
					"name": "First citizen - List",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "87ab56aa-84f3-4d90-9064-b916104415b5",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"first_client\"));",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Active\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Active\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 1 (single period)', function() {",
									"            (currentCitizen.service_reqs[0].periods.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs periods channel must be ' + citizenChannel, function() {",
									"            (currentCitizen.service_reqs[0].channel.channel_id).should.be.eql(citizenChannel);",
									"        });",
									"        it('service_reqs periods state must be \"Ticket Creation\"', function() {",
									"            (currentCitizen.service_reqs[0].periods[0].ps.ps_name).should.be.eql(\"Ticket Creation\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/{{first_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{first_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "0349f21b-10f8-4247-be5a-b62f7ceeb447",
					"name": "First citizen - Add to queue",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "c6bd4047-5ddb-4b96-9b1b-851455cbc71d",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"first_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Pending\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Pending\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 2 (now two periods)', function() {",
									"            (allPeriods.length).should.be.eql(2);",
									"        });",
									"        it('must only be one open period', function() {",
									"            openPeriodCount.should.be.eql(1);",
									"        });",
									"        it('open period state must be \"Waiting\"', function() {",
									"            openPeriod.ps.ps_name.should.be.eql(\"Waiting\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{first_client}}/add_to_queue/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{first_client}}",
								"add_to_queue",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "712eb5e6-0c2b-4405-bd26-3c4287c5be46",
					"name": "Second citizen - Create",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "b5a2ef1c-c73c-4bc6-ba18-1370ba84bbe4",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for one added citizen, correct initial values\", function() {",
									"        it('Only one citizen should be created', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_name must be null', function() {",
									"            (!currentCitizen.citizen_name).should.be.eql(true);",
									"        });",
									"        it('citizen_comments must be null', function() {",
									"            (!currentCitizen.citizen_comments).should.be.eql(true);",
									"        });",
									"        it('service_reqs must empty (no service requests)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(0);",
									"        });",
									"    });",
									"",
									"    //  Store the ID of the citizen just created.",
									"    postman.setEnvironmentVariable(\"second_client\", JSON.stringify(citizenIds.shift()));",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "b12edcc8-ddca-4324-ab3d-76aba2732279",
					"name": "Second citizen - Edit QTxn",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "f58d00cd-ab75-407b-ab4c-a541944510e3",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									"",
									"// //  Get data, create JSON body.",
									"// var citizenName = postman.getEnvironmentVariable(\"citizen_name_quick\");",
									"// var citizenComments = postman.getEnvironmentVariable(\"citizen_comment_quick\");",
									"// var bodyData = {",
									"//     \"citizen_name\" : citizenName,",
									"//     \"citizen_comments\" : citizenComments,",
									"//     \"qt_xn_citizen_ind\" : 1",
									"// };",
									"",
									"// //  Store the data in an environment variable.",
									"// postman.setEnvironmentVariable(\"putBody\", JSON.stringify(bodyData));"
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "12b50df4-9162-4d6d-8ec4-ddebc3cb6cda",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"second_client\"));",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name_quick\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment_quick\"));",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct citizen updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs must empty (no service requests)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(0);",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"citizen_name\" : {{citizen_name_quick}},\n    \"citizen_comments\" : {{citizen_comment_quick}},\n    \"qt_xn_citizen_ind\" : 1\n}"
						},
						"url": {
							"raw": "{{url}}citizens/{{second_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{second_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "09877a37-f84c-4885-ba17-dc05bd60c35c",
					"name": "Second citizen - MSP via email",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "fa6f6a3b-e4e7-42b6-a8d3-ecda3840418a",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.create_response_test);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_request\" : {\n\t\t\"service_id\" : {{service_MSP_id}},\n\t\t\"citizen_id\" : {{second_client}},\n\t\t\"quantity\" : {{citizen_quantity_update}},\n\t\t\"channel_id\" : {{channel_email_id}}\n\t}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "56903e07-8048-4f91-a64a-044af8c141d2",
					"name": "Second citizen - List",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "6abcbbab-941e-43b4-85e8-6c2f14a19c75",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name_quick\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment_quick\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_MSP_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity_update\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_email_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"second_client\"));",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Active\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Active\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 1 (single period)', function() {",
									"            (currentCitizen.service_reqs[0].periods.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs periods channel must be ' + citizenChannel, function() {",
									"            (currentCitizen.service_reqs[0].channel_id).should.be.eql(citizenChannel);",
									"        });",
									"        it('service_reqs periods state must be \"Ticket Creation\"', function() {",
									"            (currentCitizen.service_reqs[0].periods[0].ps.ps_name).should.be.eql(\"Ticket Creation\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/{{second_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{second_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "197c7bcb-ff41-4aaf-9dab-b567a2692d36",
					"name": "Second citizen - Add to queue",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "b396fdd7-845d-4702-ad69-1b53a2ced21b",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name_quick\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment_quick\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_MSP_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity_update\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"second_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Pending\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Pending\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 2 (now two periods)', function() {",
									"            (allPeriods.length).should.be.eql(2);",
									"        });",
									"        it('must only be one open period', function() {",
									"            openPeriodCount.should.be.eql(1);",
									"        });",
									"        it('open period state must be \"Waiting\"', function() {",
									"            openPeriod.ps.ps_name.should.be.eql(\"Waiting\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{second_client}}/add_to_queue/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{second_client}}",
								"add_to_queue",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "61cac902-684c-403b-bd31-75688f025db7",
					"name": "Check 2 citizens in queue",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "070b3e97-88a9-4e82-ae4e-cf476625b4b9",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "09e9a82d-d782-4916-b84d-970d41f0e231",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var citizenCount = 0;",
									"",
									"//  If citizen property was present.",
									"if (allElements !== null) {",
									"",
									"    //  Get number of citizens in the queue.",
									"    citizenCount = allElements.length;",
									"}",
									"",
									"describe(\"There should be two citizens in the office\", function() {",
									"    it(\"Length of citizen queue should be 2\", function() {",
									"        citizenCount.should.be.eql(2);",
									"    });",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "a3656914-593f-4f12-bb94-462aa2ad6743",
					"name": "Invite next citizen - should be second one",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "95764f4d-0506-47b4-a464-0f275cd2e5b5",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name_quick\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment_quick\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_MSP_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity_update\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_email_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"second_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Pending\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Pending\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 3 (now three periods)', function() {",
									"            (allPeriods.length).should.be.eql(3);",
									"        });",
									"        it('must only be one open period', function() {",
									"            openPeriodCount.should.be.eql(1);",
									"        });",
									"        it('open period state must be \"Invited\"', function() {",
									"            openPeriod.ps.ps_name.should.be.eql(\"Invited\");",
									"        });",
									"    });",
									"}",
									"",
									"//  Store the ID of the citizen just invited.",
									"postman.setEnvironmentVariable(\"current_client\", JSON.stringify(currentCitizenId));",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/invite/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"invite",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "6e7d8181-ff6f-48a8-b94e-450f69361720",
					"name": "Second citizen - begin serving",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "caecf715-4ce2-4422-8374-b330c0433f4b",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name_quick\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment_quick\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_MSP_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity_update\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_email_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"second_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one citizen being served this CSR', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Active\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Active\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 4 (now four periods)', function() {",
									"            (allPeriods.length).should.be.eql(4);",
									"        });",
									"        it('must only be one open period', function() {",
									"            openPeriodCount.should.be.eql(1);",
									"        });",
									"        it('open period state must be \"Being Served\"', function() {",
									"            openPeriod.ps.ps_name.should.be.eql(\"Being Served\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/begin_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"begin_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "2f746c1b-6c2d-4141-9e6a-907ef1771964",
					"name": "Second citizen - finish serving",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "40a3080e-6107-4b92-8cfe-0f4d429f9db8",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = jsonData.citizen;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name_quick\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment_quick\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_MSP_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity_update\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_email_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"second_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be no active citizens in the office', function() {",
									"            citizenIds.length.should.be.eql(0);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Complete\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Complete\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 4 (still four periods)', function() {",
									"            (allPeriods.length).should.be.eql(4);",
									"        });",
									"        it('must be no open periods (service is complete', function() {",
									"            openPeriodCount.should.be.eql(0);",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/finish_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"finish_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "7e32ff99-0ec9-47a1-8ddd-57a87780eeed",
					"name": "Invite next citizen - should be first one",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "17db8e75-ce53-4e6a-bbd8-ca9037ba1a29",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"first_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Pending\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Pending\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 3 (now three periods)', function() {",
									"            (allPeriods.length).should.be.eql(3);",
									"        });",
									"        it('must only be one open period', function() {",
									"            openPeriodCount.should.be.eql(1);",
									"        });",
									"        it('open period state must be \"Invited\"', function() {",
									"            openPeriod.ps.ps_name.should.be.eql(\"Invited\");",
									"        });",
									"    });",
									"}",
									"",
									"//  Store the ID of the citizen just invited.",
									"postman.setEnvironmentVariable(\"current_client\", JSON.stringify(currentCitizenId));",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/invite/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"invite",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "a84dc7d3-b07c-4174-bae8-3c15ab073634",
					"name": "First citizen - citizen left",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "a7d76250-4371-48e1-8118-c4c9004f10d3",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = jsonData.citizen;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"first_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct citizen left\", function() {",
									"        it('Must be no active citizens in the office', function() {",
									"            citizenIds.length.should.be.eql(0);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Complete\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Complete\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 3 (three periods)', function() {",
									"            (allPeriods.length).should.be.eql(3);",
									"        });",
									"        it('must be no open periods (service is complete', function() {",
									"            openPeriodCount.should.be.eql(0);",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/citizen_left/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"citizen_left",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			]
		},
		{
			"_postman_id": "1306b85e-a327-4300-8d5e-28911bddccd8",
			"name": "Check pick non-qtxn customer",
			"item": [
				{
					"_postman_id": "819987fa-04bb-4f55-a8d5-5fa7647f86df",
					"name": "Check no citizens",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "c9275086-164f-4f82-884f-75b5710f0b65",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first_nonqtxn);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "0aa4fd7b-529c-4f26-9998-c77d6c28eeb4",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var citizenCount = 0;",
									"",
									"//  If citizen property was present.",
									"if (allElements !== null) {",
									"",
									"    //  Get number of citizens in the queue.",
									"    citizenCount = allElements.length;",
									"}",
									"",
									"describe(\"There should be no citizens in the office\", function() {",
									"    it(\"Length of citizen queue should be 0\", function() {",
									"        citizenCount.should.be.eql(0);",
									"    });",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token_nonqtxn}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "5249e64d-6a91-410b-9814-cddafeb64f9d",
					"name": "First citizen - Create",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "35c3241b-1fe5-423a-91bd-789ed675e61d",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for one added citizen, correct initial values\", function() {",
									"        it('Only one citizen should be created', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_name must be null', function() {",
									"            (!currentCitizen.citizen_name).should.be.eql(true);",
									"        });",
									"        it('citizen_comments must be null', function() {",
									"            (!currentCitizen.citizen_comments).should.be.eql(true);",
									"        });",
									"        it('service_reqs must empty (no service requests)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(0);",
									"        });",
									"    });",
									"",
									"    //  Store the ID of the citizen just created.",
									"    postman.setEnvironmentVariable(\"first_client\", JSON.stringify(citizenIds.shift()));",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token_nonqtxn}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "c259a0d4-090f-4665-8c9d-1986800c5776",
					"name": "First citizen - Edit QTxn",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "b1833da7-f814-433f-8a11-295e244d9e4f",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									"",
									"// //  Get data, create JSON body.",
									"// var citizenName = postman.getEnvironmentVariable(\"citizen_name_quick\");",
									"// var citizenComments = postman.getEnvironmentVariable(\"citizen_comment_quick\");",
									"// var bodyData = {",
									"//     \"citizen_name\" : citizenName,",
									"//     \"citizen_comments\" : citizenComments,",
									"//     \"qt_xn_citizen_ind\" : 1",
									"// };",
									"",
									"// //  Store the data in an environment variable.",
									"// postman.setEnvironmentVariable(\"putBody\", JSON.stringify(bodyData));"
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "1eac614b-0f6c-4b84-8423-de10ffec680f",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"first_client\"));",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name_quick\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment_quick\"));",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct citizen updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs must empty (no service requests)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(0);",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token_nonqtxn}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"citizen_name\" : {{citizen_name_quick}},\n    \"citizen_comments\" : {{citizen_comment_quick}},\n    \"qt_xn_citizen_ind\" : 1\n}"
						},
						"url": {
							"raw": "{{url}}citizens/{{first_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{first_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "968bb7c1-01dc-40ac-9a9b-b5de7e01288b",
					"name": "First citizen - MSP via email",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "fa6f6a3b-e4e7-42b6-a8d3-ecda3840418a",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.create_response_test);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token_nonqtxn}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_request\" : {\n\t\t\"service_id\" : {{service_MSP_id}},\n\t\t\"citizen_id\" : {{first_client}},\n\t\t\"quantity\" : {{citizen_quantity_update}},\n\t\t\"channel_id\" : {{channel_email_id}}\n\t}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "5ffa9374-caae-4946-a589-f763cec984ae",
					"name": "First citizen - List",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "f695dc9f-e14f-4e39-8cc0-06d6bff46d1d",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name_quick\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment_quick\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_MSP_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity_update\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_email_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"first_client\"));",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Active\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Active\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 1 (single period)', function() {",
									"            (currentCitizen.service_reqs[0].periods.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs periods channel must be ' + citizenChannel, function() {",
									"            (currentCitizen.service_reqs[0].channel_id).should.be.eql(citizenChannel);",
									"        });",
									"        it('service_reqs periods state must be \"Ticket Creation\"', function() {",
									"            (currentCitizen.service_reqs[0].periods[0].ps.ps_name).should.be.eql(\"Ticket Creation\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token_nonqtxn}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/{{first_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{first_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "aba79299-a310-4de0-afe7-4598b6b42099",
					"name": "First citizen - Add to queue",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "4ed70849-8f22-4cd0-ab73-582dd012ba60",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name_quick\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment_quick\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_MSP_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity_update\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"first_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Pending\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Pending\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 2 (now two periods)', function() {",
									"            (allPeriods.length).should.be.eql(2);",
									"        });",
									"        it('must only be one open period', function() {",
									"            openPeriodCount.should.be.eql(1);",
									"        });",
									"        it('open period state must be \"Waiting\"', function() {",
									"            openPeriod.ps.ps_name.should.be.eql(\"Waiting\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token_nonqtxn}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{first_client}}/add_to_queue/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{first_client}}",
								"add_to_queue",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "865ee408-f19c-4884-8c75-881633c35205",
					"name": "Second citizen - Create",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "dde23c45-a5d4-4ff0-85a0-bac3873a8574",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for one added citizen, correct initial values\", function() {",
									"        it('Only one citizen should be created', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_name must be null', function() {",
									"            (!currentCitizen.citizen_name).should.be.eql(true);",
									"        });",
									"        it('citizen_comments must be null', function() {",
									"            (!currentCitizen.citizen_comments).should.be.eql(true);",
									"        });",
									"        it('service_reqs must empty (no service requests)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(0);",
									"        });",
									"    });",
									"",
									"    //  Store the ID of the citizen just created.",
									"    postman.setEnvironmentVariable(\"second_client\", JSON.stringify(citizenIds.shift()));",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token_nonqtxn}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "92c5ca2a-222d-4518-8d62-9d76cdfbddeb",
					"name": "Second citizen - Edit",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "03647497-dfc2-437d-bace-b6ab2a08fa7b",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									"",
									"// //  Get data, create JSON body.",
									"// var citizenName = postman.getEnvironmentVariable(\"citizen_name\");",
									"// var citizenComments = postman.getEnvironmentVariable(\"citizen_comment\");",
									"// var bodyData = {",
									"//     \"citizen_name\" : citizenName,",
									"//     \"citizen_comments\" : citizenComments",
									"// }",
									"",
									"// //  Store the data in an environment variable.",
									"// postman.setEnvironmentVariable(\"putBody\", JSON.stringify(bodyData));"
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "9f22638b-3ebc-404e-a43b-fb8af32a2083",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"second_client\"));",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct citizen updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs must empty (no service requests)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(0);",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token_nonqtxn}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"citizen_name\" : {{citizen_name}},\n    \"citizen_comments\" : {{citizen_comment}}\n}"
						},
						"url": {
							"raw": "{{url}}citizens/{{second_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{second_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "8444c078-aa81-4d6a-aaf8-c2b8b7ba9d14",
					"name": "Second citizen - Prop Tax via phone",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "fa6f6a3b-e4e7-42b6-a8d3-ecda3840418a",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.create_response_test);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token_nonqtxn}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_request\" : {\n\t\t\"service_id\" : {{service_PropTax_id}},\n\t\t\"citizen_id\" : {{second_client}},\n\t\t\"quantity\" : {{citizen_quantity}},\n\t\t\"channel_id\" : {{channel_telephone_id}}\n\t}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "31967ee2-1ee7-46c7-9df6-4c0e43f9d276",
					"name": "Second citizen - List",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "dcfc340a-b267-4a1b-8f39-cbedfe02ef76",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"second_client\"));",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Active\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Active\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 1 (single period)', function() {",
									"            (currentCitizen.service_reqs[0].periods.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs periods channel must be ' + citizenChannel, function() {",
									"            (currentCitizen.service_reqs[0].channel_id).should.be.eql(citizenChannel);",
									"        });",
									"        it('service_reqs periods state must be \"Ticket Creation\"', function() {",
									"            (currentCitizen.service_reqs[0].periods[0].ps.ps_name).should.be.eql(\"Ticket Creation\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token_nonqtxn}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/{{second_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{second_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "bfaffd03-1b2e-4a16-8a23-3971d315a3dd",
					"name": "Second citizen - Add to queue",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "b82e3735-add5-4522-a418-a42931ba84ae",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"second_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Pending\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Pending\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 2 (now two periods)', function() {",
									"            (allPeriods.length).should.be.eql(2);",
									"        });",
									"        it('must only be one open period', function() {",
									"            openPeriodCount.should.be.eql(1);",
									"        });",
									"        it('open period state must be \"Waiting\"', function() {",
									"            openPeriod.ps.ps_name.should.be.eql(\"Waiting\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token_nonqtxn}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{second_client}}/add_to_queue/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{second_client}}",
								"add_to_queue",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "1a27f88f-451e-421f-81c4-f10afd1f9199",
					"name": "Check 2 citizens in queue",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "070b3e97-88a9-4e82-ae4e-cf476625b4b9",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "09e9a82d-d782-4916-b84d-970d41f0e231",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var citizenCount = 0;",
									"",
									"//  If citizen property was present.",
									"if (allElements !== null) {",
									"",
									"    //  Get number of citizens in the queue.",
									"    citizenCount = allElements.length;",
									"}",
									"",
									"describe(\"There should be two citizens in the office\", function() {",
									"    it(\"Length of citizen queue should be 2\", function() {",
									"        citizenCount.should.be.eql(2);",
									"    });",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token_nonqtxn}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "5ae55957-83d3-4d71-9618-3b5a1146bb2b",
					"name": "Invite next citizen - should be second one",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "acabd700-6289-4f0b-8539-9dad33b22861",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"second_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Pending\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Pending\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 3 (now three periods)', function() {",
									"            (allPeriods.length).should.be.eql(3);",
									"        });",
									"        it('must only be one open period', function() {",
									"            openPeriodCount.should.be.eql(1);",
									"        });",
									"        it('open period state must be \"Invited\"', function() {",
									"            openPeriod.ps.ps_name.should.be.eql(\"Invited\");",
									"        });",
									"    });",
									"}",
									"",
									"//  Store the ID of the citizen just invited.",
									"postman.setEnvironmentVariable(\"current_client\", JSON.stringify(currentCitizenId));",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token_nonqtxn}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/invite/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"invite",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "757b985f-7789-4255-b4cd-559a2f6d9298",
					"name": "Second citizen - begin serving",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "0ceb5800-311b-4b82-9278-80e3296843ba",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"second_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one citizen being served this CSR', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Active\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Active\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 4 (now four periods)', function() {",
									"            (allPeriods.length).should.be.eql(4);",
									"        });",
									"        it('must only be one open period', function() {",
									"            openPeriodCount.should.be.eql(1);",
									"        });",
									"        it('open period state must be \"Being Served\"', function() {",
									"            openPeriod.ps.ps_name.should.be.eql(\"Being Served\");",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token_nonqtxn}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/begin_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"begin_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "e028343d-654c-4d9d-af55-e7112ed45ce6",
					"name": "Second citizen - finish serving",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "e36ac8d0-2ced-497a-9146-7243d9ad733f",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = jsonData.citizen;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"second_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be no active citizens in the office', function() {",
									"            citizenIds.length.should.be.eql(0);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Complete\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Complete\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 4 (still four periods)', function() {",
									"            (allPeriods.length).should.be.eql(4);",
									"        });",
									"        it('must be no open periods (service is complete', function() {",
									"            openPeriodCount.should.be.eql(0);",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token_nonqtxn}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/finish_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"finish_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "eb577c5d-d93e-40d8-b59f-6c2bc1bf639c",
					"name": "Invite next citizen - should be first one",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "cd0d90ff-6d3b-4bad-b3d4-3c4a2111aaec",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name_quick\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment_quick\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_MSP_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity_update\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_email_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"first_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct service updates\", function() {",
									"        it('Must be one active citizen in the office', function() {",
									"            citizenIds.length.should.be.eql(1);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Pending\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Pending\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 3 (now three periods)', function() {",
									"            (allPeriods.length).should.be.eql(3);",
									"        });",
									"        it('must only be one open period', function() {",
									"            openPeriodCount.should.be.eql(1);",
									"        });",
									"        it('open period state must be \"Invited\"', function() {",
									"            openPeriod.ps.ps_name.should.be.eql(\"Invited\");",
									"        });",
									"    });",
									"}",
									"",
									"//  Store the ID of the citizen just invited.",
									"postman.setEnvironmentVariable(\"current_client\", JSON.stringify(currentCitizenId));",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token_nonqtxn}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/invite/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"invite",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"_postman_id": "52005c4d-e2b6-4c25-9c34-c139a6b260a2",
					"name": "First citizen - citizen left",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"type": "text/javascript",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "99352946-b5e3-4e5e-ac12-52d8e7fba297",
								"type": "text/javascript",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = jsonData.citizen;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name_quick\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment_quick\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_MSP_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity_update\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_email_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"first_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    describe(\"Check for correct citizen left\", function() {",
									"        it('Must be no active citizens in the office', function() {",
									"            citizenIds.length.should.be.eql(0);",
									"        });",
									"        it('citizen_id must equal \"' + currentCitizenId + '\"', function() {",
									"            (currentCitizen.citizen_id).should.be.eql(currentCitizenId);",
									"        });",
									"        it('citizen_name must equal \"' + citizenName + '\"', function() {",
									"            (currentCitizen.citizen_name).should.be.eql(citizenName);",
									"        });",
									"        it('citizen_comment must equal \"' + citizenComment + '\"', function() {",
									"            (currentCitizen.citizen_comments).should.be.eql(citizenComment);",
									"        });",
									"        it('service_reqs length must be 1 (single service request)', function() {",
									"            (currentCitizen.service_reqs.length).should.be.eql(1);",
									"        });",
									"        it('service_reqs state must be \"Complete\"', function() {",
									"            (currentCitizen.service_reqs[0].sr_state.sr_code).should.be.eql(\"Complete\");",
									"        });",
									"        it('service_reqs service must be ' + citizenService, function() {",
									"            (currentCitizen.service_reqs[0].service_id).should.be.eql(citizenService);",
									"        });",
									"        it('service_reqs quantity must be ' + citizenQuantity, function() {",
									"            (currentCitizen.service_reqs[0].quantity).should.be.eql(citizenQuantity);",
									"        });",
									"        it('service_reqs periods length must be 3 (three periods)', function() {",
									"            (allPeriods.length).should.be.eql(3);",
									"        });",
									"        it('must be no open periods (service is complete', function() {",
									"            openPeriodCount.should.be.eql(0);",
									"        });",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token_nonqtxn}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/citizen_left/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"citizen_left",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			]
		}
	]
}